<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<%@page import="java.util.List"%>
<%@page import="poly.dto.UserDto"%>
<%@page import="poly.util.CmmUtil"%>
<%
	List<UserDto> rList = (List<UserDto>) request.getAttribute("rList");
%>
<html>
<head>
<meta charset="UTF-8">
<title>socket test</title>
</head>
<body>
<input type="text" value=" test succes">
</body>
<div class="searchList">
		<table border='1' id="searchLsit">
			<tr>
				<td>User ID</td>
				<td>User NAME</td>
			</tr>

			<%
				for (UserDto e : rList) {
			%>
			<tr>
				<td><%=e.getUser_id()%></td>
				<td><%=e.getName()%></td>
			</tr>
			<%
				}
			%>
		</table>
<script>
	function search() {
		//alert("test");
		var post_title = $('#post_title').val();
		//alert("제목 : " + post_title);
		if ($('#post_title').val() == "") {
			$('#post_title').focus();
			return false;
		}

		console.log("post_title : " + post_title);

		$.ajax({
			url : '/board/searchList.do',
			type : 'post',
			data : {
				"post_title" : post_title
			},
			success : function(data) {
				console.log("test");
				console.log(data)

				var resHTML = "";
				resHTML += '<tr>';
				resHTML += '<td>글 번호</td>';
				resHTML += '<td>제목</td>';
				resHTML += '<td>게시일 </td>';
				resHTML += '<td>게시자</td>';
				resHTML += '</tr>';

				if (data.length == 0) {

					resHTML += '<tr>';
					resHTML += '<td>-</td>';
					resHTML += '<td>-</td>';
					resHTML += '<td>-</td>';
					resHTML += '<td>-</td>';
					resHTML += '</tr>';

				} else {

					for (var i = 0; i < data.length; i++) {
						resHTML += '<tr>';
						resHTML += '<td>' + data[i].post_no + '</td>';
						resHTML += '<td>' + data[i].post_title + '</td>';
						resHTML += '<td>' + data[i].reg_dt + '</td>';
						resHTML += '<td>' + data[i].reg_id + '</td>';
						resHTML += '</tr>';
					}

				}
				$("#searchLsit").html(resHTML);

			}
		})
	}
</script>
</html>